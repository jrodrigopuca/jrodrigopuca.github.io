let e,t;let n=null,o=[],a=0,l=0;const i=(e,t,n,o)=>{let a=Math.PI*e/180,l=Math.PI*n/180,i=Math.sin(a)*Math.sin(l)+Math.cos(a)*Math.cos(l)*Math.cos(Math.PI*(t-o)/180);return 180*(i=Math.acos(i))/Math.PI*111189.57696},d=n=>{if(o.length>1){a+=i(o[o.length-2].lat,o[o.length-2].lng,n.lat,n.lng),t&&e.removeObject(t);let l=new H.geo.LineString;o.forEach(e=>{l.pushPoint(new H.geo.Point(e.lat,e.lng))}),t=new H.map.Polyline(l,{style:{strokeColor:"blue",lineWidth:3}}),e.addObject(t)}document.getElementById("info").innerHTML=`
          <p>Distancia recorrida: ${a.toFixed(2)} metros</p>
          <p>Puntos recorridos: ${o.length}</p>
        `},c=e=>{let t=document.getElementById("list");t.innerHTML+=`<li>Lat:${e.lat}  Lng:${e.lng}</li>`};navigator.geolocation?((()=>{let t=new H.service.Platform({apikey:"crE29IxOA2hc7fNA5t13y3TDdxnb-UXytXV7EZ8oYgM"}).createDefaultLayers();e=new H.Map(document.getElementById("map-container"),t.vector.normal.map,{zoom:18,center:{lat:37.386052,lng:-122.083851},pixelRatio:window.devicePixelRatio||1,canvas:document.createElement("canvas",{willReadFrequently:!0})}),new H.mapevents.Behavior(new H.mapevents.MapEvents(e))})(),(()=>{let t=new URLSearchParams(window.location.search).get("id");if(t){let n=(JSON.parse(localStorage.getItem("routes"))||[]).find(e=>e.id.toString()===t);if(console.log(n),n){if(o=n.path,a=n.distance,console.log("path",o),o.length>1){let t=new H.geo.LineString;o.forEach(e=>{t.pushPoint(new H.geo.Point(e.lat,e.lng))});let n=new H.map.Polyline(t,{style:{strokeColor:"blue",lineWidth:3}});e.addObject(n)}e.setCenter(n.path[0])}}})(),window.addEventListener("resize",()=>e.getViewPort().resize())):document.getElementById("info").innerHTML=`Geolocalizaci\xf3n no soportada`,document.getElementById("start-button").addEventListener("click",()=>{navigator.geolocation&&(document.getElementById("start-button").style.display="none",document.getElementById("stop-button").style.display="block",n=navigator.geolocation.watchPosition(t=>{let n={lat:t.coords.latitude,lng:t.coords.longitude},a=!o.some(e=>e.lat===n.lat&&e.lng===n.lng),i=new Date().getTime(),r=i-l;a&&r>=1e4&&(l=i,o.push(n),e.addObject(new H.map.Marker(n)),e.setCenter(n),c(n),d(n))}))}),document.getElementById("stop-button").addEventListener("click",()=>{n&&navigator.geolocation.clearWatch(n),document.getElementById("start-button").style.display="block",document.getElementById("stop-button").style.display="none"}),document.getElementById("export-button").addEventListener("click",()=>{let e=new Blob([JSON.stringify(o)],{type:"application/json"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="recorrido.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}),document.getElementById("zoom-in-button").addEventListener("click",()=>{e.setZoom(e.getZoom()+1)}),document.getElementById("zoom-out-button").addEventListener("click",()=>{e.setZoom(e.getZoom()-1)}),document.getElementById("save-button").addEventListener("click",()=>{let e=JSON.parse(localStorage.getItem("routes"))||[],t=Date.now(),n={name:"Route-"+t,id:t,distance:a,path:o};e.push(n),localStorage.setItem("routes",JSON.stringify(e)),alert("Track saved")}),document.getElementById("back-button").addEventListener("click",()=>{window.location.href="index.html"}),document.getElementById("actual-button").addEventListener("click",()=>{navigator.geolocation&&(document.getElementById("start-button").style.display="none",document.getElementById("stop-button").style.display="block",n=navigator.geolocation.watchPosition(t=>{let n={lat:t.coords.latitude,lng:t.coords.longitude},a=!o.some(e=>e.lat===n.lat&&e.lng===n.lng),i=new Date().getTime(),r=i-l;a&&r>=1e4&&(l=i,e.addObject(new H.map.Marker(n)),e.setCenter(n),c(n),d(n))}))});
//# sourceMappingURL=track.c9331ccf.js.map
